(function(b,y,u,I,c,r,e){"use strict";const{View:w,Text:n,TouchableOpacity:f,TextInput:R,ScrollView:B}=e.ReactNative;let k=[];const s={async createWebhook(t,l,o){const h=u.findByProps("post","get","patch");try{return(await h.post({url:`/channels/${t}/webhooks`,body:{name:l||"New Webhook",avatar:o||null}})).body}catch(i){throw r.showToast("Failed to create webhook: "+i.message,c.getAssetIDByName("ic_close_circle")),i}},async getChannelWebhooks(t){const l=u.findByProps("post","get","patch");try{return(await l.get({url:`/channels/${t}/webhooks`})).body}catch(o){return r.showToast("Failed to fetch webhooks: "+o.message,c.getAssetIDByName("ic_close_circle")),[]}},async deleteWebhook(t){const l=u.findByProps("post","get","patch");try{await l.delete({url:`/webhooks/${t}`}),r.showToast("Webhook deleted successfully",c.getAssetIDByName("ic_check"))}catch(o){throw r.showToast("Failed to delete webhook: "+o.message,c.getAssetIDByName("ic_close_circle")),o}}};function p({channelId:t,onClose:l}){const[o,h]=e.React.useState("New Webhook"),[i,E]=e.React.useState([]),[d,W]=e.React.useState(!1);e.React.useEffect(function(){g()},[]);const g=async function(){const a=await s.getChannelWebhooks(t);E(a)},m=async function(){W(!0);try{await s.createWebhook(t,o),r.showToast("Webhook created successfully!",c.getAssetIDByName("ic_check")),await g(),h("New Webhook")}catch{}finally{W(!1)}},v=async function(a){try{await s.deleteWebhook(a),await g()}catch{}};return e.React.createElement(B,{style:{flex:1,padding:16}},e.React.createElement(n,{style:{fontSize:20,fontWeight:"bold",marginBottom:16,color:"white"}},"Webhook Manager"),e.React.createElement(n,{style:{fontSize:14,marginBottom:8,color:"#b9bbbe"}},"Webhook Name:"),e.React.createElement(R,{value:o,onChangeText:h,style:{backgroundColor:"#40444b",color:"white",padding:12,borderRadius:8,marginBottom:12},placeholder:"Enter webhook name",placeholderTextColor:"#72767d"}),e.React.createElement(f,{onPress:m,disabled:d,style:{backgroundColor:d?"#43b581":"#5865f2",padding:12,borderRadius:8,alignItems:"center",marginBottom:24,opacity:d?.5:1}},e.React.createElement(n,{style:{color:"white",fontWeight:"bold"}},d?"Creating...":"Create Webhook")),e.React.createElement(n,{style:{fontSize:18,fontWeight:"bold",marginBottom:12,color:"white"}},"Existing Webhooks (",i.length,")"),i.map(function(a){return e.React.createElement(w,{key:a.id,style:{backgroundColor:"#2f3136",padding:12,borderRadius:8,marginBottom:8,flexDirection:"row",justifyContent:"space-between",alignItems:"center"}},e.React.createElement(w,{style:{flex:1}},e.React.createElement(n,{style:{color:"white",fontWeight:"bold",marginBottom:4}},a.name),e.React.createElement(n,{style:{color:"#72767d",fontSize:12}},a.id)),e.React.createElement(f,{onPress:function(){return v(a.id)},style:{backgroundColor:"#ed4245",padding:8,borderRadius:6}},e.React.createElement(n,{style:{color:"white",fontWeight:"bold"}},"Delete")))}))}var C={onLoad:function(){y.storage.webhookCreator=p,r.showToast("Mobile Webhooks loaded! Long press a channel to access webhook options.",c.getAssetIDByName("ic_check"))},onUnload:function(){for(const t of k)t();k=[],delete y.storage.webhookCreator},WebhookAPI:s,WebhookCreator:p};return b.default=C,Object.defineProperty(b,"__esModule",{value:!0}),b})({},vendetta.plugin,vendetta.metro,vendetta.patcher,vendetta.ui.assets,vendetta.ui.toasts,vendetta.metro.common);
